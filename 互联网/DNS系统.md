

# DNS系统


## 概述

### 目的
* 为了解决hosts文件维护困难的问题
* 一个可以解决主机名和IP地址互相转换的系统

### 简介
* DNS ==> Domain Name System
* 采样C/S模式
* 一个分布式数据库系统



## 域名介绍

### 概述
* 域名是为了识别主机名、机构而定义的一种分层的名称
* 本质上是一种管理范围的划分


### 组成
* 级别最高的域是**根域**，依次为**顶级域**、**二级域**，**三级域**，**四级域**
* 不同等级的域名使用**点号**分隔，级别最低的在最左边，级别最高的在最右边
* 每一级域名由英文字母和数字组成，域名不区分大小写

#### 示例
**www.tsinghua.edu.cn**
* cn： 顶级域名，代表中国
* edu：二级域名，代表教育机构
* tsinghua：三级域名，代表清华大学
* www：三级域名中的主机，提供web服务

#### 图示
![](https://gitee.com/cc12703/figurebed/raw/master/img/20210619235425.png)



### 域名空间

#### 结构
* 域名空间就像一颗倒过来的树
* 树根：根域名，用点号表示
* 下一级：顶级域名，包括三类（国家顶级域名、国际顶级域名、通用顶级域名）
* 下一级：二级域名，由国家自行确定
	* 我国的分类（类别域名、行政域名）
* 下一级：三级域名、四级域名

#### 示例
* 国家顶级域名：`.cn`,`.us`,`.uk`
* 国际顶级域名：`.int`
* 通用顶级域名：`.com`,`.net`,`.org`,`coop`,`.gov`
* 类别域名: `.com`,`.edu`,`.gov`
* 行政域名: `.bj`,`.sh`



## 域名服务器

### 概述
* 指管理域名的主机和软件，可以管理所在分层的域（称为区域）
	* 一个区域是DNS域名控件的一棵子树，可以单独管理

#### 图示
![](https://gitee.com/cc12703/figurebed/raw/master/img/20210626000251.png)

### 类型

#### 本地域名服务器
* 离客户端较近，也称为 默认域名服务器
* 流程
	1. 先查询数据库是否有对应的域名信息，有就直接返回
	1. 以DNS客户端的身份向**根域名服务器**进行查询，服务器会返回相关域名服务器的信息
	1. 以DNS客户端的身份向**授权域名服务器**进行查询

#### 根域名服务器
* 用于管理顶级域，本身不进行域名解析
* 记录了相关域名服务器的IP地址

#### 授权域名服务器
* 用于互联网上的主机进行注册
* 主机的授权域名服务器就是本地域名服务器

#### 主域名服务器
* 完成域名解析工作的主要服务器
* 有区域内主机地址信息的数据文件，是该区域中数据的唯一来源

#### 辅助域名服务器
* 协助主域名服务器提供域名查询服务
* 用于分担主域名服务器的压力


## 域名解析

### 概述
* 域名解析：将域名解析为对应的IP地址
* 过程：DNS Resolver <=> DNS Server

### 解析过程
1. DNS客户端向本地域名服务器发送请求（www.tsinghua.edu.cn）
1. 本地服务器查询数据库无记录，将请求发给根域名服务器
1. 根服务器

#### 图示
![](https://gitee.com/cc12703/figurebed/raw/master/img/20210626002430.png)

