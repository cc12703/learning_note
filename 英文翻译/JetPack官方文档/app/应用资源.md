

# 应用资源

* 原始文档：https://developer.android.com/guide/topics/resources/providing-resources


[TOC]


## 总体

### 概述
* 资源是指代码所使用的附加文件和静态内容
    * 例子：位图、布局定义、用户界面的字符串、动画指令
* 你可以从代码中将应用资源分离出来，这样可以独立的管理它们
* 你也可以通过将资源放在一个特定名字的目录下，来为特定设备提供不一样的资源
* 运行时，系统会基于当前配置来选择一个近似的资源使用
    * 例子：基于屏幕大小提供一个不同的界面布局，基于语言设置来提供不同的字符串
* 一旦你分离了资源，你可以通过R类中生成的资源ID来访问它们


### 按资源类型分组
* 可以在项目res目录下，将每个类型的资源放入特定的子目录

#### 例子
```
 MyProject/
    src/
        MyActivity.java
    res/
        drawable/
            graphic.png
        layout/
            main.xml
            info.xml
        mipmap/
            icon.png
        values/
            strings.xml
```

#### 子目录说明
* 表1：res目录下支持的资源目录

| 目录 | 资源类型 | 
| -- | -- |
| animator/ | XML文件，定义属性动画 |
| anim/  | XML文件，定义补间动画 |
| color/ | XML文件，定义颜色 |
| drawable/ | 位图文件或XML文件（会被编译成不同的可绘制资源子类型） |
| mipmap/ | 可绘制文件，定义启动图标 | 
| layout/ | XML文件，定义用户界面布局 | 
| menu/ | XML文件，定义应用菜单（选项菜单、上下文菜单、子菜单） | 
| raw/ | 任意文件，保存为资源的原始格式 |
| values/ | XML文件，包括简单值：字符串、整数、颜色 |
| xml/ | 任意XML文件，通过Resources.getXML()读取 |
| font/ | 字体文件（.ttf, .otf, .ttc） | 




## 提供不同资源
* 几乎每个应用都会为特定设备提供不同的资源
* 例子：为不同屏幕分辨率提供不同的绘制资源，为不同的语言提供不同的字符串资源
* 运行时，系统会侦测当前设备的配置并加载对应最接近的资源


### 操作步骤
1. 在res/目录下，创建格式为[资源名字]-[限定符]的子目录
    * 资源名字：是一个对应默认资源的目录名，见表1
    * 限定名：用于指定一个独立的配置，见表2
1. 在子目录下保存资源，资源文件名需要和默认资源文件名一样

#### 例子
```
res/
    drawable/
        icon.png
        background.png
    drawable-hdpi/
        icon.png
        background.png
```
* hdpi限定符表明该目录下的资源用于高分辨率屏幕
* 每个drawable目录下的图片都是用于特定屏幕分辨率的，但是文件名是一样的
* 这样就可以使用相同的资源ID来引用icon.png, background.png
* 系统会通过比较设备配置信息和目录名中的限定符来选择一个和当前设备最匹配的版本


### 限定符说明
* 表2：配置限定符

#### MCC和MNC
##### 值
* mcc310
* mcc310-mnc004

##### 说明
* 如果设备使用无线连接，该值来自与sim卡


#### 语言和区域
##### 值
* en
* fr
* en-rUS 
* b+en+US

##### 说明
* 语言使用定义在ISO 639-1 中的两字母语言码
* 区域使用定义在ISO 3166-1-alpha2 中的两字母区域码
* 代码不区分大小写
* r前缀用于区分区域部分，区域不能单独使用
* android7.0开始引入 BCP47 语言标识
    * 一个语言标识由一个、多个子标识组合而成
    * 使用时，需要链接b+和ISO 639-1中的语言码


#### 布局方向
##### 值
* ldrtl (布局方向从右到左)
* ldltr (布局方向从左到右)

##### 例子
```
res/
    layout/
        main.xml 默认布局
    layout-ar/
        main.xml 针对阿拉伯语的特定布局
    layout-ldrtl/
        main.xml 针对任何从右到左语言的布局，除去阿拉伯语
```

#### 最小宽度
##### 值
* 格式：sw\<N\>dp
* sw320dp
* sw600dp

##### 说明