
# 自然语言处理

## 概述

### 核心话题

 * 如何利用统计手法对语言建模

### 处理层次

#### <1> 词法分析

 * 中文分词：讲文本分隔成有意义的词语
 * 词性标注：确定每个词语的类别，消除浅层的歧义
 * 命名实体识别：识别出较长的专用名词

#### <2> 信息抽取

 * 统计高频词
 * 提取关键词

#### <2> 句法分析

#### <2> 文本分类、聚类

#### <3> 语义分析

 * 词义消歧
 * 语义角色标注
 * 语义依存分析


### 语料库

#### 中文分词语料库

 * PKU：1998年《人民日报》语料库
 * MSR：微软亚洲研究院语料库

#### 词性标注语料库

#### 命名实体识别语料库

#### 句法分析语料库

#### 文本分类语料库

### 工具包

 * NLTK
 * CoreNLP
 * LTP
 * HanLP


## 中文分词

### 评测指标

#### OOV Recall

 * 含义：未登录词（新词、词典未收录）的召回率

#### IV Recall

 * 含义：登录词（词典中收录）的召回率


### 词典分词

#### 原理

 * 使用一定规则从词典中找出词

#### 难点

 * 支撑查词的数据结构

#### 核心价值

 * 分词速度

#### 查词规则

##### 完全切分算法（基础）

###### 方法

 1. 遍历文本中的连续序列
 1. 查询该序列是否在词典中

##### 正向最长匹配

###### 方法

 1. 从某个下标从前往后扫描
 1. 优先输出更长的单词

##### 逆向最长匹配

###### 方法

 1. 从某个下标从后往前扫描
 2. 优先输出更长的单词

##### 双向最长匹配

###### 方法

 1. 同时执行正向、逆向最长匹配，获得匹配结果
 1. 若两者结果词数不同，则返回词数更少的结果
 1. 若两者结果单字数不同，则返回单字数更少的结果
 1. 优先返回逆向最长匹配的结果


#### 数据结构

##### 字典树（trie树、前缀树）

###### 作用

  * 快速判断字典中是否含有字符串

###### 结构

 * 每条边对应一个字
 * 从根节点往下的路径构成字符串
 * 叶节点会有词语结尾的标记

###### 查找

 1. 顺着根节点往下走
 2. 如果最后走到的节点有结尾标记，就说明字符串在集合中

###### 改进

 * 首字散列其余二分字典树
 * 双数组字典树（DAT）：状态转移复杂度为常数
 * AC自动机：给前缀树的每个节点建立一棵后缀树，可以节省大量查询
 * 基于DAT的AC自动机

###### 其他用途

 * 过滤停用词
 * 简繁体转换
 * 拼音转换


### 二元语法分词

#### 思路

 * 将句子生成为全切分词网，对其中的二元进行打分
 * 使用维特比算法找出概率最大的路径

#### 缺点

 * 无法处理OOV问题

#### 模型

 * 一个句子出现的概率等于所有单词出现概率的乘积
 * 一个单词出现的概率只取决于前一个单词（使用马尔可夫链进行简化）
 * 由于数据稀疏(二个连续单词，很多时候在语料库中是找不到的)，概率值需要进行平滑处理
 * 公式: $ p(w) = \prod_{t=1}^{k+1} p(w_t | w_{t-1}) $

#### 模型训练

 * 含义：使用语料库来估计模型的参数
 * 内容：统计二元语法频次和一元语法频次


#### 预测

##### 内容

 * 利用模型来推断分词序列

##### 思想

 * 使用句子中的所有单词生成 词图
 * 使用算法（维特比算法）在词图上寻找负对数的最短路径

##### 词图

###### 定义

 * 每个节点为一个单词
 * 每条边是一个二元语法的概率
 * 每条路径代表一种分词方式

###### 概率计算

 * 方法：使用极大似然估计和平滑策略得到
 * 公式： $ p(w_t|w_{t-1}) = 
                \lambda [ \mu \frac{c(w_{t-1}w_t)}{c(w_t)} + 1 - \mu ] 
                 + (1 - \lambda)\frac{c(w_t)+1}{N} $

#### 用户词典集成

##### 低优先级模式

 * 由统计模型获得分词结果
 * 将该结果按照用户词典进行合并

###### 高优先级模式

 * 优先考虑用户词典，具体方式由不同分词器决定



## 序列标注

### 含义

 * 给定一个序列X，找出序列中每个元素对应标签Y

### 应用

 * 中文分词
 * 词性标注
 * 命名实体识别

### 模型

 * 隐马尔可夫模型（HMM）
 * 结构化感知机